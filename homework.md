## Spring 2. Lesson 6

Домашнее задание:
1. Разобраться с кодом
2. Попробовать вынести корзины в отдельный МС
- Если получилось - хорошо, если нет, то обязателен "черновик" и список
  вопросов и проблем, которые не позволили полностью выполнить задачу
### решение
1. столкнулся с проблемой Redis(Memurai) - выдавал ошибки сервис корзин.
     - в коде Фисунова у корзин был другой пакет, а Memurai в значении хранит полное имя класса.
        Почистил Memurai и все заработало.
2. Вынес корзины в отдельный микросервис - CartService. Выяснилось, что он
    связан с Product, а Order зависят от CartService.
     - поэтому в CartController я через RestTemplate обращаюсь к Product,
     получаю товар по id
     - а вот в OrderService нам нужна корзина пользователя,
     подразумевается что пользователь должен быть аутентифицирован.
     - поэтому через RestTemplate я обращаюсь в CartControllerr к методу
       ```
       @GetMapping("/{uuid}")
       public Cart getCart(@RequestHeader(required = false) String username, @PathVariable String uuid) {
       return cartService.getCurrentCart(getCurrentCartUuid(username, uuid));}
       ```
     - поскольку запрос идет через наш Gateway, я думал что он автоматом подошьет
     заголовок username, но этого не происходило и пришлось самому в RestTemplate
     вставить заголовок - username.
     - далее, в CartController вышеназванный метод должен получить некий uuid -
     это идет с фронта. На бэке его нет, поэтому чтобы не писать новый метод, 
     я вызываю старый, а в качестве uuid я просто передаю заглушку - какую-то строку
     -- так правильно или нет??? Или нужно все таки писать новый метод в контроллере к которму мы обращаемся.
3. Вроде бы все работает после этого.
       